# ğŸ”„ Stocks Search 101 - Complete Data Flow Architecture

## ğŸ“ Figma-Style System Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           STOCKS SEARCH 101 PLATFORM                                â”‚
â”‚                     Polytope-Based Stock Forensic Analysis                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                 DATA INGESTION LAYER                                â”‚
â”‚                              (ETL Pipeline - Node.js)                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Symbol Sources  â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ â€¢ sampleData.js  â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Default (40 stocks)
    â”‚ â€¢ Custom JSON    â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ $env:INGEST_SYMBOLS_FILE
    â”‚ â€¢ Custom TXT     â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Watchlist format
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  fetch-daily.js  â”‚
    â”‚   ETL Script     â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ â€¢ Concurrency: 4 â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ $env:INGEST_CONCURRENCY
    â”‚ â€¢ Retries: 2     â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ $env:INGEST_RETRIES
    â”‚ â€¢ Pacing: 400ms  â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Rate limiting
    â”‚ â€¢ SSL Support    â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ $env:ALLOW_INSECURE_SSL
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”œâ”€â”¤  Finnhub API Endpoints       â”‚
             â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
             â”‚ â”‚ /quote â†’ Stock prices        â”‚
             â”‚ â”‚ /stock/profile2 â†’ Companies  â”‚
             â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         DATA PERSISTENCE LAYER               â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚  public/data/                                â”‚
    â”‚  â”œâ”€â”€ raw/                                    â”‚
    â”‚  â”‚   â””â”€â”€ 2026-01-22/                         â”‚
    â”‚  â”‚       â”œâ”€â”€ AAPL.json    â—„â”€â”€â”€ Per-symbol   â”‚
    â”‚  â”‚       â”œâ”€â”€ TSLA.json         raw data     â”‚
    â”‚  â”‚       â””â”€â”€ ...                             â”‚
    â”‚  â”œâ”€â”€ hot/                                    â”‚
    â”‚  â”‚   â””â”€â”€ hotCache.json    â—„â”€â”€â”€ Consolidated â”‚
    â”‚  â”‚                             browser cache â”‚
    â”‚  â””â”€â”€ manifest.json         â—„â”€â”€â”€ Run metadataâ”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”‚ Published to Git / Deployed
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          APPLICATION RUNTIME LAYER                                â”‚
â”‚                         (React 18 + Vite SPA)                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                        App.jsx (Root Component)                     â”‚
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚ â”‚  useEffect(() => preloadAnalysis(), [])  â—„â”€â”€ Startup Hook      â”‚ â”‚
    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚        analysisCache.js (Pre-computation)               â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ â€¢ Loads all stock data at startup                       â”‚
    â”‚ â€¢ Calculates metrics for 40+ stocks in memory           â”‚
    â”‚ â€¢ DCF, EPV, Asset-based valuations pre-computed         â”‚
    â”‚ â€¢ Instant getCachedAnalysis(symbol) access              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         finnhubAPI.js (Data Access Layer)               â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚  Mode Detection:                                        â”‚
    â”‚  if (API_KEY && API_KEY !== 'demo') {                   â”‚
    â”‚    â†’ LIVE MODE: Direct Finnhub API calls                â”‚
    â”‚  } else {                                               â”‚
    â”‚    â†’ MOCK MODE: Hot cache + Sample data                 â”‚
    â”‚  }                                                      â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚  ensureHotCache() â†’ Loads /data/hot/hotCache.json       â”‚
    â”‚  â€¢ Merges into sampleStocks[]                           â”‚
    â”‚  â€¢ Populates mockStockQuotes{}                          â”‚
    â”‚  â€¢ Populates mockCompanyProfiles{}                      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                     VIEW ROUTING LAYER                            â”‚
    â”‚                   (State-Based Navigation)                        â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚  currentView = 'landing' | 'results' | 'deepdive' | 'forensics'  â”‚
    â”‚              | 'watchlist' | 'about'                              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚             â”‚             â”‚
        â–¼             â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LandingPage  â”‚ â”‚ Dashboard â”‚ â”‚  SearchBar     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â”‚ User search query
                                        â–¼
                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                â”‚ SearchResults     â”‚
                                â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                                â”‚ â”‚ Stock cards   â”‚ â”‚
                                â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚ User clicks stock
                                          â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚           DeepDive Component            â”‚
                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                        â”‚ â€¢ Displays stock quote & profile        â”‚
                        â”‚ â€¢ Shows price, market cap, volume       â”‚
                        â”‚ â€¢ Links to Forensics & Polytope tabs    â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚                           â”‚
                        â–¼                           â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  ForensicsAnalysis        â”‚  â”‚  PolytopeAnalysis             â”‚
        â”‚  Component                â”‚  â”‚  Component                    â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ â€¢ Live API calls          â”‚  â”‚ â€¢ Uses cached analysis        â”‚
        â”‚ â€¢ getStockQuote()         â”‚  â”‚ â€¢ getCachedAnalysis(symbol)   â”‚
        â”‚ â€¢ getCompanyProfile()     â”‚  â”‚ â€¢ Instant load (< 50ms)       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚                               â”‚
                      â–¼                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚            analysisEngine.js (Risk Scoring)                â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ calculateFinancialMetrics()    â†’ P/E, P/B, Market Cap      â”‚
        â”‚ calculatePolytopeScore()       â†’ 5 red flags (0-10 score)  â”‚
        â”‚ estimateDCFValuation()         â†’ Discounted Cash Flow      â”‚
        â”‚ estimateAssetBasedValuation()  â†’ Tangible book value       â”‚
        â”‚ estimateEPV()                  â†’ Earnings power value      â”‚
        â”‚ generateBenchmarkComparison()  â†’ Industry vs. actual       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚         FORENSIC RISK FLAGS                  â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ 1. Daily Volatility > 5%         â†’ +2 points â”‚
        â”‚ 2. Market Cap < $500M            â†’ +2 points â”‚
        â”‚ 3. Price < $5 (Penny Stock)      â†’ +2 points â”‚
        â”‚ 4. Volume < 1M shares            â†’ +2 points â”‚
        â”‚ 5. P/E Ratio > 30x               â†’ +2 points â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ Score: 0-2   â†’ ğŸŸ¢ REVIEW                     â”‚
        â”‚ Score: 3-5   â†’ ğŸŸ¡ HOLD                       â”‚
        â”‚ Score: 6-10  â†’ ğŸ”´ DO NOT BUY                 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚          Charts.jsx (Visualization)          â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ â€¢ PriceChart (Recharts)                      â”‚
        â”‚ â€¢ ValuationChart (DCF vs EPV vs Asset)       â”‚
        â”‚ â€¢ RiskScoreChart (Radar for 5 flags)         â”‚
        â”‚ â€¢ BenchmarkChart (Industry comparison)       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚         USER DECISION MAKING                 â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ â€¢ Review risk score & flags                  â”‚
        â”‚ â€¢ Compare valuations (DCF/EPV/Asset-based)   â”‚
        â”‚ â€¢ Check Polytope Framework alignment         â”‚
        â”‚ â€¢ Add to watchlist or skip                   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            PERSISTENCE & STORAGE                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   localStorage        â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ â€¢ Watchlist storage   â”‚
    â”‚ â€¢ User preferences    â”‚
    â”‚ â€¢ Session state       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              DEPLOYMENT WORKFLOW                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Local Development:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ npm run dev        â”‚ â”€â”€â–º  â”‚ Vite Dev Server    â”‚
    â”‚ (localhost:3000)   â”‚      â”‚ Hot Module Reload  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Data Refresh:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ npm run fetch:dailyâ”‚ â”€â”€â–º  â”‚ ETL Pipeline       â”‚
    â”‚ (separate terminal)â”‚      â”‚ Updates hot cache  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Production Build:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ npm run build      â”‚ â”€â”€â–º  â”‚ dist/ folder       â”‚ â”€â”€â–º  â”‚ Static hosting  â”‚
    â”‚ (Vite bundler)     â”‚      â”‚ (optimized assets) â”‚      â”‚ Vercel/Netlify  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Data Flow Sequence Diagrams

### **1. ETL Pipeline Flow (Daily Data Refresh)**

```
Developer                fetch-daily.js           Finnhub API          File System
    â”‚                          â”‚                        â”‚                   â”‚
    â”‚â”€â”€â”€ npm run fetch:daily â”€â”€â–ºâ”‚                        â”‚                   â”‚
    â”‚                          â”‚                        â”‚                   â”‚
    â”‚                          â”‚â”€â”€ Load symbols â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚
    â”‚                          â”‚   (sampleData.js       â”‚                   â”‚
    â”‚                          â”‚    or custom file)     â”‚                   â”‚
    â”‚                          â”‚                        â”‚                   â”‚
    â”‚                          â”‚â”€â”€ GET /quote (AAPL) â”€â”€â–ºâ”‚                   â”‚
    â”‚                          â”‚â—„â”€ Price data â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                   â”‚
    â”‚                          â”‚                        â”‚                   â”‚
    â”‚                          â”‚â”€â”€ GET /profile2 (AAPL)â–ºâ”‚                   â”‚
    â”‚                          â”‚â—„â”€ Company info â”€â”€â”€â”€â”€â”€â”€â”€â”‚                   â”‚
    â”‚                          â”‚                        â”‚                   â”‚
    â”‚                          â”‚â”€â”€ Save raw/YYYY-MM-DD/AAPL.json â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
    â”‚                          â”‚                        â”‚                   â”‚
    â”‚                          â”‚   [Repeat for 40 symbols with 4 workers]  â”‚
    â”‚                          â”‚   [400ms pacing between requests]         â”‚
    â”‚                          â”‚                        â”‚                   â”‚
    â”‚                          â”‚â”€â”€ Generate hotCache.json â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
    â”‚                          â”‚   (Consolidated cache)                    â”‚
    â”‚                          â”‚                        â”‚                   â”‚
    â”‚                          â”‚â”€â”€ Generate manifest.json â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
    â”‚                          â”‚   (Run metadata)                          â”‚
    â”‚                          â”‚                        â”‚                   â”‚
    â”‚â—„â”€â”€â”€â”€â”€â”€ âœ… Success â”€â”€â”€â”€â”€â”€â”€â”€â”‚                        â”‚                   â”‚
    â”‚    39/40 symbols fetched â”‚                        â”‚                   â”‚
    â”‚    12.4 seconds elapsed  â”‚                        â”‚                   â”‚
```

### **2. User Search Flow (Live Mode with API Key)**

```
User           App.jsx      SearchBar    finnhubAPI.js    Finnhub API    SearchResults
 â”‚                â”‚             â”‚              â”‚               â”‚               â”‚
 â”‚â”€ Type "AAPL" â”€â–ºâ”‚             â”‚              â”‚               â”‚               â”‚
 â”‚                â”‚             â”‚              â”‚               â”‚               â”‚
 â”‚                â”‚â—„â”€ Input â”€â”€â”€â”€â”‚              â”‚               â”‚               â”‚
 â”‚                â”‚             â”‚              â”‚               â”‚               â”‚
 â”‚â”€ Click Search â–ºâ”‚             â”‚              â”‚               â”‚               â”‚
 â”‚                â”‚             â”‚              â”‚               â”‚               â”‚
 â”‚                â”‚â”€â”€ handleSearch("AAPL") â”€â”€â”€â”€â–ºâ”‚               â”‚               â”‚
 â”‚                â”‚             â”‚              â”‚               â”‚               â”‚
 â”‚                â”‚             â”‚              â”‚â”€ GET /search â–ºâ”‚               â”‚
 â”‚                â”‚             â”‚              â”‚    ?q=AAPL    â”‚               â”‚
 â”‚                â”‚             â”‚              â”‚â—„â”€ 20 results â”€â”‚               â”‚
 â”‚                â”‚             â”‚              â”‚               â”‚               â”‚
 â”‚                â”‚â—„â”€â”€â”€â”€â”€ 20 stocks â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚               â”‚               â”‚
 â”‚                â”‚             â”‚              â”‚               â”‚               â”‚
 â”‚                â”‚â”€â”€ setResults([...]) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
 â”‚                â”‚             â”‚              â”‚               â”‚               â”‚
 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Display stock cards â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
 â”‚                â”‚             â”‚              â”‚               â”‚               â”‚
 â”‚â”€ Click "AAPL"â”€â–ºâ”‚             â”‚              â”‚               â”‚               â”‚
 â”‚                â”‚             â”‚              â”‚               â”‚               â”‚
 â”‚                â”‚â”€â”€ setCurrentView('deepdive')                               â”‚
 â”‚                â”‚â”€â”€ setSelectedStock({symbol:'AAPL'})                        â”‚
 â”‚                â”‚             â”‚              â”‚               â”‚               â”‚
 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Navigate to DeepDive â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
```

### **3. Forensic Analysis Flow (Real-time Risk Calculation)**

```
User          DeepDive    ForensicsAnalysis    finnhubAPI.js    analysisEngine.js
 â”‚               â”‚               â”‚                   â”‚                  â”‚
 â”‚â”€ View Stock â”€â–ºâ”‚               â”‚                   â”‚                  â”‚
 â”‚               â”‚               â”‚                   â”‚                  â”‚
 â”‚               â”‚â”€â”€ Click "Forensics" tab â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                  â”‚
 â”‚               â”‚               â”‚                   â”‚                  â”‚
 â”‚               â”‚               â”‚â”€â”€â”€ getStockQuote(symbol) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚
 â”‚               â”‚               â”‚â—„â”€â”€ {c, h, l, o, pc, v} â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
 â”‚               â”‚               â”‚                   â”‚                  â”‚
 â”‚               â”‚               â”‚â”€â”€â”€ getCompanyProfile(symbol) â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
 â”‚               â”‚               â”‚â—„â”€â”€ {marketCap, industry, etc} â”€â”€â”€â”€â”€â”€â”€â”‚
 â”‚               â”‚               â”‚                   â”‚                  â”‚
 â”‚               â”‚               â”‚â”€â”€â”€ calculateFinancialMetrics() â”€â”€â”€â”€â”€â”€â–ºâ”‚
 â”‚               â”‚               â”‚â—„â”€â”€ {pe, pb, volume, volatility} â”€â”€â”€â”€â”€â”‚
 â”‚               â”‚               â”‚                   â”‚                  â”‚
 â”‚               â”‚               â”‚â”€â”€â”€ calculatePolytopeScore() â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
 â”‚               â”‚               â”‚    â€¢ Check volatility > 5%           â”‚
 â”‚               â”‚               â”‚    â€¢ Check market cap < $500M        â”‚
 â”‚               â”‚               â”‚    â€¢ Check price < $5                â”‚
 â”‚               â”‚               â”‚    â€¢ Check volume < 1M               â”‚
 â”‚               â”‚               â”‚    â€¢ Check P/E > 30x                 â”‚
 â”‚               â”‚               â”‚â—„â”€â”€ {score: 6, flags: [...], risk: 'HIGH'}
 â”‚               â”‚               â”‚                   â”‚                  â”‚
 â”‚               â”‚               â”‚â”€â”€â”€ Display risk score â”€â”€â”€â”€           â”‚
 â”‚               â”‚               â”‚    with color coding:                â”‚
 â”‚               â”‚               â”‚    ğŸ”´ DO NOT BUY (score: 6)          â”‚
 â”‚               â”‚               â”‚                   â”‚                  â”‚
 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
 â”‚  Visual: Red warning + 3 triggered flags                             â”‚
```

### **4. Polytope Analysis Flow (Cached Pre-computation)**

```
User          DeepDive    PolytopeAnalysis    analysisCache.js    analysisEngine.js
 â”‚               â”‚               â”‚                   â”‚                    â”‚
 â”‚â”€ View Stock â”€â–ºâ”‚               â”‚                   â”‚                    â”‚
 â”‚               â”‚               â”‚                   â”‚                    â”‚
 â”‚               â”‚â”€â”€ Click "Polytope" tab â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                    â”‚
 â”‚               â”‚               â”‚                   â”‚                    â”‚
 â”‚               â”‚               â”‚â”€â”€â”€ getCachedAnalysis(symbol) â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
 â”‚               â”‚               â”‚â—„â”€â”€ {                                   â”‚
 â”‚               â”‚               â”‚      quote: {...},                     â”‚
 â”‚               â”‚               â”‚      metrics: {...},                   â”‚
 â”‚               â”‚               â”‚      polytopeScore: {...},             â”‚
 â”‚               â”‚               â”‚      valuations: {                     â”‚
 â”‚               â”‚               â”‚        dcf: 150.00,                    â”‚
 â”‚               â”‚               â”‚        epv: 145.00,                    â”‚
 â”‚               â”‚               â”‚        assetBased: 130.00              â”‚
 â”‚               â”‚               â”‚      },                                â”‚
 â”‚               â”‚               â”‚      benchmark: [...],                 â”‚
 â”‚               â”‚               â”‚      chartData: [...]                  â”‚
 â”‚               â”‚               â”‚    } â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
 â”‚               â”‚               â”‚    (< 50ms - instant from memory)      â”‚
 â”‚               â”‚               â”‚                   â”‚                    â”‚
 â”‚               â”‚               â”‚â”€â”€â”€ Render valuation charts             â”‚
 â”‚               â”‚               â”‚    â€¢ DCF Valuation                     â”‚
 â”‚               â”‚               â”‚    â€¢ EPV Valuation                     â”‚
 â”‚               â”‚               â”‚    â€¢ Asset-Based Valuation             â”‚
 â”‚               â”‚               â”‚    â€¢ Benchmark Comparison              â”‚
 â”‚               â”‚               â”‚                   â”‚                    â”‚
 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
 â”‚  Visual: 3 valuations + benchmark table + radar chart                 â”‚
```

---

## ğŸ“Š Component Dependency Graph

```
                            App.jsx (Root)
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚            â”‚            â”‚
              Navigation    LandingPage    Dashboard
                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚           â”‚           â”‚
    SearchBar  SearchResults  WatchList
        â”‚           â”‚           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                 DeepDive
                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚           â”‚           â”‚
  ForensicsAnalysis  PolytopeAnalysis  PolytopeFramework
        â”‚           â”‚           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                 Charts
           (PriceChart, ValuationChart,
            RiskScoreChart, BenchmarkChart)

Service Layer Dependencies:
â”œâ”€â”€ finnhubAPI.js         â† All components fetch data here
â”œâ”€â”€ analysisEngine.js     â† Risk & valuation calculations
â”œâ”€â”€ analysisCache.js      â† Pre-computed data store
â”œâ”€â”€ sampleData.js         â† Fallback mock data
â””â”€â”€ apiConfig.js          â† API configuration
```

---

## ğŸ¯ Performance Optimization Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   STARTUP SEQUENCE                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. User opens app (localhost:3000)
   â”‚
   â”œâ”€â–º App.jsx mounts
   â”‚   â”‚
   â”‚   â”œâ”€â–º useEffect(() => preloadAnalysis(), [])
   â”‚   â”‚   â”‚
   â”‚   â”‚   â””â”€â–º analysisCache.js
   â”‚   â”‚       â”‚
   â”‚   â”‚       â”œâ”€â–º Load mockStockQuotes (40 stocks)
   â”‚   â”‚       â”œâ”€â–º Load mockCompanyProfiles (40 stocks)
   â”‚   â”‚       â”‚
   â”‚   â”‚       â”œâ”€â–º For each stock:
   â”‚   â”‚       â”‚   â”œâ”€â–º calculateFinancialMetrics()
   â”‚   â”‚       â”‚   â”œâ”€â–º calculatePolytopeScore()
   â”‚   â”‚       â”‚   â”œâ”€â–º estimateDCFValuation()
   â”‚   â”‚       â”‚   â”œâ”€â–º estimateAssetBasedValuation()
   â”‚   â”‚       â”‚   â”œâ”€â–º estimateEPV()
   â”‚   â”‚       â”‚   â”œâ”€â–º generateBenchmarkComparison()
   â”‚   â”‚       â”‚   â””â”€â–º generateChartsData()
   â”‚   â”‚       â”‚
   â”‚   â”‚       â””â”€â–º Store in analysisCache{} (in-memory)
   â”‚   â”‚
   â”‚   â””â”€â–º Render LandingPage
   â”‚
   â””â”€â–º âœ… App ready in < 2 seconds

2. User searches for stock
   â”‚
   â””â”€â–º searchStocks(query)
       â”‚
       â”œâ”€â–º if (USE_MOCK_DATA) â†’ Filter sampleStocks (< 50ms)
       â””â”€â–º else â†’ API call to Finnhub (200-500ms)

3. User views Polytope Analysis
   â”‚
   â””â”€â–º getCachedAnalysis(symbol)
       â”‚
       â””â”€â–º Return pre-computed data from memory (< 50ms)
       
RESULT: Instant analysis display with no network delay!
```

---

## ğŸŒ Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  PRODUCTION DEPLOYMENT                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Developer Workflow:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ npm run         â”‚ â”€â”€â”€â–º â”‚ npm run build   â”‚ â”€â”€â”€â–º â”‚ Git commit   â”‚
â”‚ fetch:daily     â”‚      â”‚ (Vite bundler)  â”‚      â”‚ + push       â”‚
â”‚                 â”‚      â”‚                 â”‚      â”‚              â”‚
â”‚ â€¢ Updates       â”‚      â”‚ â€¢ Optimizes JS  â”‚      â”‚ â€¢ dist/      â”‚
â”‚   hotCache.json â”‚      â”‚ â€¢ Minifies CSS  â”‚      â”‚ â€¢ public/    â”‚
â”‚ â€¢ Raw data      â”‚      â”‚ â€¢ Tree-shakes   â”‚      â”‚ â€¢ index.html â”‚
â”‚ â€¢ Manifest      â”‚      â”‚ â€¢ Code splittingâ”‚      â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                                          â”‚
                                                          â–¼
                                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                â”‚   Git Repository   â”‚
                                                â”‚   (GitHub)         â”‚
                                                â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                       â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚                              â”‚                          â”‚
                        â–¼                              â–¼                          â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   Vercel Deploy   â”‚        â”‚  Netlify Deploy   â”‚      â”‚  GitHub Pages    â”‚
              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
              â”‚ â€¢ Auto-deploy     â”‚        â”‚ â€¢ Auto-deploy     â”‚      â”‚ â€¢ Manual deploy  â”‚
              â”‚ â€¢ CDN distributionâ”‚        â”‚ â€¢ CDN distributionâ”‚      â”‚ â€¢ Free hosting   â”‚
              â”‚ â€¢ HTTPS auto      â”‚        â”‚ â€¢ HTTPS auto      â”‚      â”‚ â€¢ HTTPS auto     â”‚
              â”‚ â€¢ No backend      â”‚        â”‚ â€¢ No backend      â”‚      â”‚ â€¢ No backend     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚                              â”‚                          â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                       â”‚
                                                       â–¼
                                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                            â”‚   End Users         â”‚
                                            â”‚   (Global CDN)      â”‚
                                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Key Points:
â€¢ Zero backend/database required (100% static site)
â€¢ Data bundled with deployment (public/data/)
â€¢ ETL runs locally before deployment
â€¢ API key optional (mock mode works offline)
â€¢ CDN edge caching for instant load times
```

---

## ğŸ” Security & Data Privacy Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SECURITY LAYERS                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. API Key Management:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ .env file     â”‚ â—„â”€â”€â”€ Local development only
   â”‚ .gitignore    â”‚ â—„â”€â”€â”€ Never committed to Git
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   
   For deployment:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Vercel ENV vars    â”‚ â—„â”€â”€â”€ VITE_FINNHUB_API_KEY
   â”‚ Netlify ENV vars   â”‚ â—„â”€â”€â”€ Set in hosting dashboard
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2. Data Storage:
   â€¢ No user data stored on backend (no backend!)
   â€¢ Watchlist in localStorage only (client-side)
   â€¢ No cookies, no tracking, no analytics
   
3. Corporate Proxy Support:
   $env:ALLOW_INSECURE_SSL="true"  â—„â”€â”€â”€ ETL bypass for proxies
   (Never exposed to frontend)

4. Rate Limiting:
   â€¢ ETL: 400ms pacing (respects Finnhub free tier: 60 calls/min)
   â€¢ Browser: Hot cache fallback (no API spam)
```

---

## ğŸ“ˆ Scalability & Future Enhancements

```
Current Architecture (V1):
â”œâ”€â”€ 40 stocks pre-loaded
â”œâ”€â”€ ETL runs manually (npm run fetch:daily)
â””â”€â”€ Static site deployment

Potential Upgrades:
â”œâ”€â”€ V2: GitHub Actions for scheduled ETL (daily cron job)
â”œâ”€â”€ V3: Support 500+ stocks (pagination, search indexing)
â”œâ”€â”€ V4: Real-time WebSocket data (live price updates)
â”œâ”€â”€ V5: User accounts + cloud watchlist sync
â””â”€â”€ V6: Portfolio tracking + P&L calculations
```

---

## âœ¨ Key Technical Achievements

1. **Dual-Mode Data Strategy**: Works with or without API key
2. **Pre-computation Caching**: Analysis pre-loaded at startup (< 50ms access)
3. **ETL Pipeline**: Production-grade with retry, concurrency, rate limiting
4. **Zero Backend**: 100% static site (Vercel/Netlify ready)
5. **Polytope Framework**: Real implementation, not educational mock
6. **Forensic Analysis**: Live risk scoring with 5 red flags
7. **Triple Valuation**: DCF + EPV + Asset-based models
8. **Graceful Degradation**: API â†’ Hot Cache â†’ Sample Data fallback chain
